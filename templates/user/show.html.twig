{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}

{% block body %}
	<h1>User</h1>

	<table class="table">
		<tbody>
			<tr>
				<th>Id</th>
				<td>{{ user.id }}</td>
			</tr>
			<tr>
				<th>Email</th>
				<td>{{ user.email }}</td>
			</tr>
			<tr>
				<th>Roles</th>
				<td>{{ user.roles ? user.roles|json_encode : '' }}</td>
			</tr>
			<tr>
				<th>Password</th>
				<td>{{ user.password }}</td>
			</tr>
			<tr>
				<th>FirstName</th>
				<td>{{ user.firstName }}</td>
			</tr>
			<tr>
				<th>LastName</th>
				<td>{{ user.lastName }}</td>
			</tr>
			<tr>
				<th>Address</th>
				<td>{{ user.address }}</td>
			</tr>
			<tr>
				<th>PostalCode</th>
				<td>{{ user.postalCode }}</td>
			</tr>
			<tr>
				<th>City</th>
				<td>{{ user.city }}</td>
			</tr>
			<tr>
				<th>CreatedAt</th>
				<td>{{ user.createdAt ? user.createdAt|date('Y-m-d H:i:s') : '' }}</td>
			</tr>
			<tr>
				<th>Fees</th>
				<td>{{ user.fees ? 'Yes' : 'No' }}</td>
			</tr>
		</tbody>
	</table>
	<table>
		<thead>
			<tr>
				<td>Titre</td>
				<td>Date d'emprunt</td>
			</tr>
		</thead>
		<tbody>
			
				{% for loan in user.loans %}
					{% for livres in loan.livres %}
                    <tr>
						{% for livre in loan.livres %}
							{% if livre.title %}
								<td>
									{{livre.title}}
								</td>
								<td>
									{{loan.createdAt |date('d-m-Y')}}
								</td>
							{% endif %}
                            </tr>
						{% endfor %}
                        
					{% endfor %}
				{% endfor %}
			{% for loan in user.loans %}
					{% for cdroms in loan.cdrom %}
                    <tr>
						{% for cdrom in loan.cdrom %}
							{% if cdrom.title %}
								<td>
									{{cdrom.title}}
								</td>
								<td>
									{{loan.createdAt |date('d-m-Y')}}
								</td>
							{% endif %}
                            </tr>
						{% endfor %}
                        
					{% endfor %}
				{% endfor %}
		</tbody>
	</table>

	<a href="{{ path('user_index') }}">back to list</a>

	<a href="{{ path('user_edit', {'id': user.id}) }}">edit</a>

	{{ include('user/_delete_form.html.twig') }}
{% endblock %}
